<?xml version="1.0" encoding="UTF-8"?>
<mod>
    <action name="trap">
        <object name="subject"/>
        <string name="notifyType"/>
        <object name="tile"/>
        <bindTile tile="tile" tileEntity="subject" notify="notifyType" position="objects"/>
        
        <code>
if notifyType == 'add':
    # TODO: direct notification to trap entity?
    # this should make it faster..
    trap = tile.get('trap')
    if trap:
        try:
            hurt = trap.attr('hurt')
            # TODO: replace with proper action
            subject.changeNumericAttr('hp', -hurt)
        except EntityAttributeError:
            warning('this trap doesn\'t hurt or subject isn\'t hurtable!')
    else:
        debug('looks like there is no trap')
        </code>
    </action>
</mod>
