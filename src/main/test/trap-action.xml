<?xml version="1.0" encoding="UTF-8"?>
<mod type="action" name="trap">
    <object name="subject"/>
    <string name="notifyType"/>
    <object name="tile"/>
    <bindTile tile="tile" tileEntity="subject" notify="notifyType" position="objects"/>
    
    <code>
if notifyType == 'remove':
    logging.debug('tile entity remove notification')
elif notifyType == 'add':
    trap = tile.get('trap')
    if trap:
        try:
            hurt = trap.attr('hurt')
            # TODO: replace with proper action
            subject.changeNumericAttr('hp', -hurt)
        except:
            logging.warning('this trap doesn\'t hurt or subject isn\'t hurtable!')
    else:
        logging.debug('looks like there is no trap')
else:
    logging.warning('unknown tile notification')
    </code>
</mod>
